# Lab Log: Adam_4

Fresh combat character created after Adam_3's combat broke.

## Character Progress

| Date | Arc | Duration | Score Before | Score After | Delta |
|------|-----|----------|--------------|-------------|-------|
| 01-25 | combat-money | 300s | 30 | 78 | +48 |
| 01-25 | combat-money | 71s | 78 | 86 | +8 |
| 01-25 | combat-money | 301s | 87 | 157 | +70 |
| 01-25 | combat-money | 300s | 157 | 179 | +22 |
| 01-25 | combat-money | 197s | 179 | 182 | +3 | (loot fix - now collecting coins!)
| 01-25 | combat-money | 300s | 182 | 185 | +3 |
| 01-25 | combat-money | 262s | 185 | 191 | +6 |
| 01-25 | combat-money | 300s | 191 | 194 | +3 |
| 01-25 | cowhide-training | 184s | 194 | 197 | +3 | (cows much better - 31 hides collected!)
| 01-25 | cowhide-training | 300s | 197 | 209 | +12 | (fixed attack priority - 28 kills!)
| 01-25 | cowhide-training | 300s | 209 | 214 | +5 | (Defence 37→38 level up, 30 kills)
| 01-25 | cowhide-training | 180s | 214 | ~217 | +3 | (20+ kills, cut short)
| 01-25 | combat-progression | 600s | 230 | 230 | 0 | (banking loop bug - no combat, just failed banking)
| 01-25 | combat-progression | 600s | 230 | 238 | +8 | (Def 35→45! 91 hides collected, banking failed, dropped all)
| 01-25 | combat-progression | 182s | 242 | 244 | +2 | (Def 46→48, disconnected early)
| 01-25 | combat-progression | 600s | 244 | 246 | +2 | (Atk 48→50! 44 kills, 98 hides, style rotated)
| 01-25 | combat-progression | 600s | 246 | 247 | +1 | (46 kills, but got stuck outside fence - added gate fix)
| 01-25 | combat-progression | 600s | 247 | 251 | +4 | (Def 48→50! Atk 50→52! Gate fix working, 38 kills)
| 01-25 | combat-progression | 128s | 251 | 252 | +1 | (Def 50→51, short run - disconnected)
| 01-25 | combat-progression | 600s | 252 | 256 | +4 | (Def 51→52, HP 54→55, browser crashes during runs)
| 01-25 | combat-progression | 524s | 253 | 260 | +7 | (Atk 52→55! Def 51→54! HP 55→56! 47 kills, 92 hides)
| 01-25 | combat-progression | 374s | 260 | 265 | +5 | (Atk 55→57! Def 54→56! HP 56→57! 33 kills, 63 hides)
| 01-25 | combat-progression | ~500s | 265 | 268 | +3 | (Atk 57→58! Def 56→57! HP 57→58! Many short runs due to browser crashes)
| 01-25 | session 2 | N/A | 268 | 268 | 0 | (debugging browser state sync - useSharedBrowser issue found)
| 01-25 | combat-progression | 88s | 268 | 269 | +1 | (Def 57→58! 6 kills, browser crashed at loop 100)
| 01-25 | combat-progression | 188s | 269 | 272 | +3 | (Atk→59! Def→59! HP→59! 22 kills, 26 hides dropped)
| 01-25 | combat-progression | 83s | 272 | 272 | 0 | (12 kills, crash at loop 150, no level ups)
| 01-25 | combat-progression | 146s | 272 | 273 | +1 | (Atk→60! 14 kills)
| 01-25 | combat-progression | 30s | 273 | 272 | -1 | (0 kills, interactNpc timeout, stale XP read)
| 01-25 | combat-progression | 27s | 272 | 272 | 0 | (16 kills, browser crash, fixed isAttacking check)
| 01-25 | combat-progression | 53s | 272 | 272 | 0 | (14 kills, interactNpc timeout)
| 01-25 | combat-progression | 65s | 272 | 272 | 0 | (20 kills, 37 hides dropped, browser crashed)
| 01-25 | combat-progression | 300s | 272 | 273 | +1 | (Atk 59→60! 121 kills, 130 hides dropped - FULL RUN SUCCESS!)
| 01-25 | combat-progression | 101s | 273 | 273 | 0 | (26 kills, confirmed Atk=60, browser crashed)
| 01-25 | combat-progression | 4s | 273 | 273 | 0 | (2 kills, browser unstable)
| 01-25 | combat-progression | 52s | 273 | 273 | 0 | (20 kills, browser crashed)
| 01-25 | combat-progression | 25s | 273 | 273 | 0 | (9 kills, browser crashed)
| 01-25 | combat-progression | various | - | - | - | (multiple runs with browser stability issues)
| 01-25 | combat-progression | 45s | 273 | 274 | +1 | (Str 59→60! 19 kills, fixed drop loop bug)
| 01-25 | combat-progression | 24s | 274 | 274 | 0 | (15 kills, browser crashed)
| 01-25 | combat-progression | 300s | 274 | 275 | +1 | (HP 59→60! 175 kills - FULL RUN)
| 01-25 | combat-progression | 300s | 275 | 275 | 0 | (181 kills, full run, no level ups)
| 01-25 | combat-progression | 153s | 275 | 275 | 0 | (55 kills, browser crashed)
| 01-25 | combat-progression | 136s | 275 | 276 | +1 | (Def 59→60! 40 kills)
| 01-25 | combat-progression | 109s | 277 | 277 | 0 | (12 kills, Atk 60→61!)
| 01-25 | combat-progression | 66s | 277 | 277 | 0 | (23 kills, browser crashed)
| 01-25 | combat-progression | 120s | 277 | 277 | 0 | (54 kills, training strength)
| 01-25 | combat-progression | 261s | 277 | 278 | +1 | (Str 60→61! 120 kills)
| 01-25 | various | various | 278 | 277 | -1 | (state sync issues, actual level confirmed 258)

---

## Current State (Session 4 End - 11:34 PM)

**Total Level**: 258 (Atk 61, Str 60, Def 60, HP 60 + others 1)
**GP**: 19
**Equipment**: Bronze sword equipped
**Equipment Value**: ~0

**Score**: 258 + 19 = 277

**Inventory** (26 items):
- Combat: Bronze sword (equipped), Bronze dagger
- Sellable: Bronze axe, Tinderbox, Small fishing net, Bucket, Pot, Bronze pickaxe, Wooden shield, Shortbow, 25 Bronze arrows, 25 Air runes, 15 Mind runes, 6 Water runes, 4 Earth runes, 9 Body runes, 7 Raw beef
- Food: Shrimps, Bread

**Session Summary**:
- Started at Score 273 (Atk 60, Str 59, Def 59, HP 59)
- Ended at Score 277 (Atk 61, Str 60, Def 60, HP 60)
- **Net Progress: +4 levels, +4 score**
- Combat training working well despite browser instability
- Multiple successful runs (up to 5 minutes, 175 kills)
- Fixed infinite drop loop bug (BANK_THRESHOLD: 24→27)

**Browser Stability Issues**:
- State sync failure happens ~50% of runs (position shows 0,0)
- Browser crashes every 2-5 minutes
- Longer waits between runs (5-10s) help somewhat
- Server may need restart for full stability

**Next Steps**:
1. Continue combat training towards 70+ Attack/Strength/Defence
2. Run sell-and-upgrade arc when browser is stable to get GP
3. Buy iron/steel sword at Varrock for faster kills

**Arcs Created**:
- `combat-progression/script.ts` - Combat training at Lumbridge cows with style rotation
- `sell-and-upgrade/script.ts` - Sells items at Lumbridge, buys weapons at Varrock

---

## Notes

- Created because Adam_3's combat was broken (attack commands sent but no XP gained)
- Combat working well - Strength 1→34 in 5 minutes
- Combat style rotation implemented (Strength → Attack → Defence)
- **FIXED**: Loot pickup now works - was using `nearbyLocs` instead of `groundItems`
- **FIXED**: Cowhide script - attack priority over looting to prevent infinite loot loops
- Goblins drop very few coins - switched to cows for cowhides (more valuable)
- Cowhides collected but dropped (banking not implemented yet) - still tracks for stats

## Key Learnings

1. `sdk.getGroundItems()` for dropped items, NOT `state.nearbyLocs`
2. `ctx.bot.pickupItem(item)` to pick up ground items
3. Don't loop on loot pickup - pick up ONE item, then continue with combat
4. Cows are better than goblins for both XP and loot (cowhides ~100gp each)

## Issues Observed

- Frequent dialog dismissals during combat (random events? level-ups!)
- Browser disconnection after ~3 minutes sometimes (transient)
- **Banking not working**: Stair climbing fails silently - bot walks to stairs, finds Staircase object, sends interact, but floor level doesn't change. Fallback to dropping hides works fine for training.
- **NEW**: Server tick freeze causes disconnects - "[Health] Game tick frozen for 15s" in logs
- **NEW**: useSharedBrowser=true causes state sync failure (position stuck at 0,0)

## Goals

- **Combat**: 70+ Attack, Strength, Defence
- **Money**: Bank cowhides for GP (~100gp each)
- **Equipment**: Bronze → Iron → Steel (Varrock shops)
